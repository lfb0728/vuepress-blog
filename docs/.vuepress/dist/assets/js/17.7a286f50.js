(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{358:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"git-标签管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-标签管理"}},[t._v("#")]),t._v(" Git 标签管理")]),t._v(" "),s("p",[t._v("发布一个版本时，我们通常先在版本库中打一个标签（tag），这样，就唯一确定了打标签时刻的版本。将来无论什么时候，取某个标签的版本，就是把那个打标签的时刻的历史版本取出来。所以，标签也是版本库的一个快照。")]),t._v(" "),s("p",[t._v("Git的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的。")]),t._v(" "),s("p",[t._v("Git有commit，为什么还要引入tag？")]),t._v(" "),s("p",[t._v("“请把上周一的那个版本打包发布，commit号是6a5819e...”")]),t._v(" "),s("p",[t._v("“一串乱七八糟的数字不好找！”")]),t._v(" "),s("p",[t._v("如果换一个办法：")]),t._v(" "),s("p",[t._v("“请把上周一的那个版本打包发布，版本号是v1.2”")]),t._v(" "),s("p",[t._v("“好的，按照tag v1.2查找commit就行！”")]),t._v(" "),s("p",[t._v("所以，tag就是一个让人容易记住的有意义的名字，它跟某个commit绑在一起。")]),t._v(" "),s("h2",{attrs:{id:"创建标签"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建标签"}},[t._v("#")]),t._v(" 创建标签")]),t._v(" "),s("p",[t._v("在Git中打标签非常简单，首先，切换到需要打标签的分支上：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch\n* dev\n  master\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout master\nSwitched to branch "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v("\n")])])]),s("p",[t._v("然后，敲命令"),s("code",[t._v("git tag <name>")]),t._v("就可以打一个新标签：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag v1.0\n")])])]),s("p",[t._v("可以用命令"),s("code",[t._v("git tag")]),t._v("查看所有标签：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag\nv1.0\n")])])]),s("p",[t._v("默认标签是打在最新提交的commit上的。有时候，如果忘了打标签，比如，现在已经是周五了，但应该在周一打的标签没有打，怎么办？")]),t._v(" "),s("p",[t._v("方法是找到历史提交的commit id，然后打上就可以了：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" log --pretty"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("oneline --abbrev-commit\na77f6de "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HEAD -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" master, tag: v.10, origin/master, origin/HEAD"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" merge bug "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),t._v(" fix\n34cbeb2 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n147ce9b merge bug fix "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),t._v("\n7207be8 fix bug "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),t._v("\n933e165 merge with no-ff\n4afe796 第五个版本\nbae428b 解决冲突后的第四个版本\n23150f2 和第三个版本解决冲突\n94afac1 第四个版本\n894b6e5 第三个版本\nfb74ee7 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\nb516c2e 文件删除版本\nd6e43ff 第二个版本\n685bd3d 第一个版本\n\n")])])]),s("p",[t._v("比方说要对"),s("code",[t._v("第五个版本")]),t._v("这次提交打标签，它对应的commit id是"),s("code",[t._v("f52c633")]),t._v("，敲入命令：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag v0.9 4afe796\n")])])]),s("p",[t._v("再用命令"),s("code",[t._v("git tag")]),t._v("查看标签：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag\nv0.9\nv1.0\n")])])]),s("p",[t._v("注意，标签不是按时间顺序列出，而是按字母排序的。可以用"),s("code",[t._v("git show <tagname>")]),t._v("查看标签信息：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" show v.10\ncommit a77f6de223f7a2e3e23d698fc0d5855fb0eaf97c "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HEAD -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" master, tag: v.10, origin/master, origin/HEAD"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nMerge: 147ce9b 34cbeb2\nAuthor: lfb0728 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1449826851")]),t._v("@qq.com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Sat May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":34:41 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" +0800\n\n    merge bug "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),t._v(" fix\n\n")])])]),s("p",[t._v("可以看到，"),s("code",[t._v("v.10")]),t._v("确实打在"),s("code",[t._v("merge bug 101 fix")]),t._v("这次提交上。")]),t._v(" "),s("p",[t._v("还可以创建带有说明的标签，用"),s("code",[t._v("-a")]),t._v("指定标签名，"),s("code",[t._v("-m")]),t._v("指定说明文字：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" tag -a v0.1 -m "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'version 0.1 released'")]),t._v(" 685bd3d\n")])])]),s("p",[t._v("用命令"),s("code",[t._v("git show <tagname>")]),t._v("可以看到说明文字：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" show v0.1\ntag v0.1\nTagger: lfb0728 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1449826851")]),t._v("@qq.com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Thu May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(":57:49 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" +0800\n\nversion "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" released\n\ncommit 685bd3d84a3a3a0a493e32de2d522e84c924c6ed "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag: v0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nAuthor: lfb0728 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1449826851")]),t._v("@qq.com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Sun May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":25:42 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" +0800\n\n    第一个版本\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v(" --git a/readme.txt b/readme.txt\nnew "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" mode "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100644")]),t._v("\nindex 0000000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("d8036c1\n--- /dev/null\n+++ b/readme.txt\n@@ -0,0 +1,2 @@\n+Git is a version control system.\n+Git is "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" software.\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" No newline at end of "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),s("ul",[s("li",[t._v("命令"),s("code",[t._v("git tag <tagname>")]),t._v("用于新建一个标签，默认为"),s("code",[t._v("HEAD")]),t._v("，也可以指定一个commit id；")]),t._v(" "),s("li",[t._v("命令"),s("code",[t._v('git tag -a <tagname> -m "blablabla..."')]),t._v("可以指定标签信息；")]),t._v(" "),s("li",[t._v("命令"),s("code",[t._v("git tag")]),t._v("可以查看所有标签。")])])])}),[],!1,null,null,null);a.default=n.exports}}]);