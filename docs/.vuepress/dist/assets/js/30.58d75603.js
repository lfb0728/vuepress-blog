(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{374:function(e,t,v){"use strict";v.r(t);var a=v(42),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"git-创建分支与合并分支"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#git-创建分支与合并分支"}},[e._v("#")]),e._v(" Git 创建分支与合并分支")]),e._v(" "),v("p",[e._v("在"),v("a",{attrs:{href:"https://www.liaoxuefeng.com/wiki/896043488029600/897013573512192",target:"_blank",rel:"noopener noreferrer"}},[e._v("版本回退"),v("OutboundLink")],1),e._v("里，你已经知道，每次提交，Git都把它们串成一条时间线，这条时间线就是一个分支。截止到目前，只有一条时间线，在Git里，这个分支叫主分支，即"),v("code",[e._v("master")]),e._v("分支。"),v("code",[e._v("HEAD")]),e._v("严格来说不是指向提交，而是指向"),v("code",[e._v("master")]),e._v("，"),v("code",[e._v("master")]),e._v("才是指向提交的，所以，"),v("code",[e._v("HEAD")]),e._v("指向的就是当前分支。")]),e._v(" "),v("p",[e._v("一开始的时候，"),v("code",[e._v("master")]),e._v("分支是一条线，Git用"),v("code",[e._v("master")]),e._v("指向最新的提交，再用"),v("code",[e._v("HEAD")]),e._v("指向"),v("code",[e._v("master")]),e._v("，就能确定当前分支，以及当前分支的提交点：")]),e._v(" "),v("p",[v("img",{attrs:{src:"https://www.liaoxuefeng.com/files/attachments/919022325462368/0",alt:"git-br-initial"}})]),e._v(" "),v("p",[e._v("每次提交，"),v("code",[e._v("master")]),e._v("分支都会向前移动一步，这样，随着你不断提交，"),v("code",[e._v("master")]),e._v("分支的线也越来越长。")]),e._v(" "),v("p",[e._v("当我们创建新的分支，例如"),v("code",[e._v("dev")]),e._v("时，Git新建了一个指针叫"),v("code",[e._v("dev")]),e._v("，指向"),v("code",[e._v("master")]),e._v("相同的提交，再把"),v("code",[e._v("HEAD")]),e._v("指向"),v("code",[e._v("dev")]),e._v("，就表示当前分支在"),v("code",[e._v("dev")]),e._v("上：")]),e._v(" "),v("p",[v("img",{attrs:{src:"https://www.liaoxuefeng.com/files/attachments/919022363210080/l",alt:"git-br-create"}})]),e._v(" "),v("p",[e._v("假如我们在"),v("code",[e._v("dev")]),e._v("上的工作完成了，就可以把"),v("code",[e._v("dev")]),e._v("合并到"),v("code",[e._v("master")]),e._v("上。Git怎么合并呢？最简单的方法，就是直接把"),v("code",[e._v("master")]),e._v("指向"),v("code",[e._v("dev")]),e._v("的当前提交，就完成了合并：")]),e._v(" "),v("p",[v("img",{attrs:{src:"https://www.liaoxuefeng.com/files/attachments/919022412005504/0",alt:"git-br-ff-merge"}})]),e._v(" "),v("p",[e._v("所以Git合并分支也很快！就改改指针，工作区内容也不变！")]),e._v(" "),v("p",[e._v("合并完分支后，甚至可以删除"),v("code",[e._v("dev")]),e._v("分支。删除"),v("code",[e._v("dev")]),e._v("分支就是把"),v("code",[e._v("dev")]),e._v("指针给删掉，删掉后，我们就剩下了一条"),v("code",[e._v("master")]),e._v("分支：")]),e._v(" "),v("p",[v("img",{attrs:{src:"https://www.liaoxuefeng.com/files/attachments/919022479428512/0",alt:"git-br-rm"}})]),e._v(" "),v("p",[e._v("下面开始实战。")]),e._v(" "),v("p",[e._v("首先，我们创建"),v("code",[e._v("dev")]),e._v("分支，然后切换到"),v("code",[e._v("dev")]),e._v("分支：")]),e._v(" "),v("div",{staticClass:"language-shell extra-class"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[e._v("$ "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" checkout -b dev   // 创建分支并切换到这个分支\nSwitched to a new branch "),v("span",{pre:!0,attrs:{class:"token string"}},[e._v("'dev'")]),e._v("\n\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" branch // 查看所有分支，*代表当前分支\n* dev\n  master\n")])])]),v("p",[e._v("然后，我们就可以在"),v("code",[e._v("dev")]),e._v("分支上正常提交，比如对"),v("code",[e._v("readme.txt")]),e._v("做个修改，加上一行：")]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("Creating a new branch is quick.\n")])])]),v("p",[e._v("然后提交：")]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v('git add readme.txt\n\ngit commit -m "第三个版本"\n')])])]),v("p",[e._v("现在，"),v("code",[e._v("dev")]),e._v("分支的工作完成，我们就可以切换回"),v("code",[e._v("master")]),e._v("分支：")]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v("$ git checkout master\nSwitched to branch 'master'\n")])])]),v("p",[e._v("切换回"),v("code",[e._v("master")]),e._v("分支后，再查看一个"),v("code",[e._v("readme.txt")]),e._v("文件，刚才添加的内容不见了！因为那个提交是在"),v("code",[e._v("dev")]),e._v("分支上，而"),v("code",[e._v("master")]),e._v("分支此刻的提交点并没有变：")]),e._v(" "),v("p",[v("img",{attrs:{src:"https://www.liaoxuefeng.com/files/attachments/919022533080576/0",alt:"git-br-on-master"}})]),e._v(" "),v("p",[e._v("现在，我们把"),v("code",[e._v("dev")]),e._v("分支的工作成果合并到"),v("code",[e._v("master")]),e._v("分支上：")]),e._v(" "),v("div",{staticClass:"language-shell extra-class"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[e._v("$ "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" merge dev // 合并分支\nUpdating fb74ee7"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v("894b6e5\nFast-forward\n readme.txt "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v(" ++-\n "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("file")]),e._v(" changed, "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(" insertions"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("+"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" deletion"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("-"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" readme.txt // 查看文件\nGit is a distributed version control system.\nGit is "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("free")]),e._v(" software distributed under the GPL.\nCreating a new branch is quick.\n\n")])])]),v("p",[v("code",[e._v("git merge")]),e._v("命令用于合并指定分支到当前分支。合并后，再查看"),v("code",[e._v("readme.txt")]),e._v("的内容，就可以看到，和"),v("code",[e._v("dev")]),e._v("分支的最新提交是完全一样的。")]),e._v(" "),v("p",[e._v("注意到上面的"),v("code",[e._v("Fast-forward")]),e._v("信息，Git告诉我们，这次合并是“快进模式”，也就是直接把"),v("code",[e._v("master")]),e._v("指向"),v("code",[e._v("dev")]),e._v("的当前提交，所以合并速度非常快。")]),e._v(" "),v("p",[e._v("当然，也不是每次合并都能"),v("code",[e._v("Fast-forward")]),e._v("，我们后面会讲其他方式的合并。")]),e._v(" "),v("p",[e._v("合并完成后，就可以放心地删除"),v("code",[e._v("dev")]),e._v("分支了：")]),e._v(" "),v("div",{staticClass:"language-shell extra-class"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[e._v("$ "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" branch -d dev\nDeleted branch dev "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("was 894b6e5"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(".\n\n$ "),v("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" branch // 删除后就只剩master分支了\n* master\n")])])]),v("p",[e._v("总结一下：")]),e._v(" "),v("p",[e._v("查看分支："),v("code",[e._v("git branch")])]),e._v(" "),v("p",[e._v("创建分支并切换至分支："),v("code",[e._v("git checkout -b dev")])]),e._v(" "),v("p",[e._v("创建+切换分支："),v("code",[e._v("git checkout -b")]),e._v("或者"),v("code",[e._v("git switch -c")])]),e._v(" "),v("p",[e._v("合并某分支到当前分支："),v("code",[e._v("git merge")])]),e._v(" "),v("p",[e._v("删除分支："),v("code",[e._v("git branch -d")])])])}),[],!1,null,null,null);t.default=s.exports}}]);